/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a(require("jquery")):typeof define==="function"&&define.amd?define(["jquery"],a):(b.Mark=a(b.jQuery))}(this,(function(f){f=f&&f.hasOwnProperty("default")?f["default"]:f;var d=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol==="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};var h=function(i,j){if(!(i instanceof j)){throw new TypeError("Cannot call a class as a function")}};var g=function(){function i(m,k){for(var j=0;j<k.length;j++){var l=k[j];l.enumerable=l.enumerable||false;l.configurable=true;if("value" in l){l.writable=true}Object.defineProperty(m,l.key,l)}}return function(l,j,k){if(j){i(l.prototype,j)}if(k){i(l,k)}return l}}();var c=Object.assign||function(m){for(var k=1;k<arguments.length;k++){var l=arguments[k];for(var j in l){if(Object.prototype.hasOwnProperty.call(l,j)){m[j]=l[j]}}}return m};var b=function(){function k(z){var C=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var B=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var A=arguments.length>3&&arguments[3]!==undefined?arguments[3]:5000;h(this,k);this.ctx=z;this.iframes=C;this.exclude=B;this.iframesTimeout=A}g(k,[{key:"getContexts",value:function v(){var z=void 0,A=[];if(typeof this.ctx==="undefined"||!this.ctx){z=[]}else{if(NodeList.prototype.isPrototypeOf(this.ctx)){z=Array.prototype.slice.call(this.ctx)}else{if(Array.isArray(this.ctx)){z=this.ctx}else{if(typeof this.ctx==="string"){z=Array.prototype.slice.call(document.querySelectorAll(this.ctx))}else{z=[this.ctx]}}}}z.forEach(function(B){var C=A.filter(function(D){return D.contains(B)}).length>0;if(A.indexOf(B)===-1&&!C){A.push(B)}});return A}},{key:"getIframeContents",value:function r(E,z){var D=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};var C=void 0;try{var A=E.contentWindow;C=A.document;if(!A||!C){throw new Error("iframe inaccessible")}}catch(B){D()}if(C){z(C)}}},{key:"isIframeBlank",value:function o(C){var B="about:blank",A=C.getAttribute("src").trim(),z=C.contentWindow.location.href;return z===B&&A!==B&&A}},{key:"observeIframeLoad",value:function t(F,z,E){var D=this;var A=false,C=null;var B=function B(){if(A){return}A=true;clearTimeout(C);try{if(!D.isIframeBlank(F)){F.removeEventListener("load",B);D.getIframeContents(F,z,E)}}catch(G){E()}};F.addEventListener("load",B);C=setTimeout(B,this.iframesTimeout)}},{key:"onIframeReady",value:function x(C,z,B){try{if(C.contentWindow.document.readyState==="complete"){if(this.isIframeBlank(C)){this.observeIframeLoad(C,z,B)}else{this.getIframeContents(C,z,B)}}else{this.observeIframeLoad(C,z,B)}}catch(A){B()}}},{key:"waitForIframes",value:function w(A,z){var C=this;var B=0;this.forEachIframe(A,function(){return true},function(D){B++;C.waitForIframes(D.querySelector("html"),function(){if(!--B){z()}})},function(D){if(!D){z()}})}},{key:"forEachIframe",value:function y(H,z,G){var F=this;var A=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var B=H.querySelectorAll("iframe"),D=B.length,E=0;B=Array.prototype.slice.call(B);var C=function C(){if(--D<=0){A(E)}};if(!D){C()}B.forEach(function(I){if(k.matches(I,F.exclude)){C()}else{F.onIframeReady(I,function(J){if(z(I)){E++;G(J)}C()},C)}})}},{key:"createIterator",value:function n(z,B,A){return document.createNodeIterator(z,B,A,false)}},{key:"createInstanceOnIframe",value:function u(z){return new k(z.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function j(B,z,F){var E=B.compareDocumentPosition(F),A=Node.DOCUMENT_POSITION_PRECEDING;if(E&A){if(z!==null){var C=z.compareDocumentPosition(F),D=Node.DOCUMENT_POSITION_FOLLOWING;if(C&D){return true}}else{return true}}return false}},{key:"getIteratorNode",value:function p(A){var z=A.previousNode();var B=void 0;if(z===null){B=A.nextNode()}else{B=A.nextNode()&&A.nextNode()}return{prevNode:z,node:B}}},{key:"checkIframeFilter",value:function i(B,z,C,E){var A=false,D=false;E.forEach(function(G,F){if(G.val===C){A=F;D=G.handled}});if(this.compareNodeIframe(B,z,C)){if(A===false&&!D){E.push({val:C,handled:true})}else{if(A!==false&&!D){E[A].handled=true}}return true}if(A===false){E.push({val:C,handled:false})}return false}},{key:"handleOpenIframes",value:function l(D,C,B,z){var A=this;D.forEach(function(E){if(!E.handled){A.getIframeContents(E.val,function(F){A.createInstanceOnIframe(F).forEachNode(C,B,z)})}})}},{key:"iterateThroughNodes",value:function s(H,K,J,G,I){var E=this;var F=this.createIterator(K,H,G);var C=[],z=[],B=void 0,A=void 0,D=function D(){var L=E.getIteratorNode(F);A=L.prevNode;B=L.node;return B};while(D()){if(this.iframes){this.forEachIframe(K,function(L){return E.checkIframeFilter(B,A,L,C)},function(L){E.createInstanceOnIframe(L).forEachNode(H,function(M){return z.push(M)},G)})}z.push(B)}z.forEach(function(L){J(L)});if(this.iframes){this.handleOpenIframes(C,H,J,G)}I()}},{key:"forEachNode",value:function m(E,D,C){var A=this;var z=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var F=this.getContexts();var B=F.length;if(!B){z()}F.forEach(function(G){var H=function H(){A.iterateThroughNodes(E,G,D,C,function(){if(--B<=0){z()}})};if(A.iframes){A.waitForIframes(G,H)}else{H()}})}}],[{key:"matches",value:function q(C,z){var B=typeof z==="string"?[z]:z,D=C.matches||C.matchesSelector||C.msMatchesSelector||C.mozMatchesSelector||C.oMatchesSelector||C.webkitMatchesSelector;if(D){var A=false;B.every(function(E){if(D.call(C,E)){A=true;return false}return true});return A}else{return false}}}]);return k}();var a=function(){function q(u){h(this,q);this.opt=c({},{diacritics:true,synonyms:{},accuracy:"partially",caseSensitive:false,ignoreJoiners:false,ignorePunctuation:[],wildcards:"disabled"},u)}g(q,[{key:"create",value:function m(u){if(this.opt.wildcards!=="disabled"){u=this.setupWildcardsRegExp(u)}u=this.escapeStr(u);if(Object.keys(this.opt.synonyms).length){u=this.createSynonymsRegExp(u)}if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length){u=this.setupIgnoreJoinersRegExp(u)}if(this.opt.diacritics){u=this.createDiacriticsRegExp(u)}u=this.createMergedBlanksRegExp(u);if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length){u=this.createJoinersRegExp(u)}if(this.opt.wildcards!=="disabled"){u=this.createWildcardsRegExp(u)}u=this.createAccuracyRegExp(u);return new RegExp(u,"gm"+(this.opt.caseSensitive?"":"i"))}},{key:"escapeStr",value:function j(u){return u.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createSynonymsRegExp",value:function l(z){var u=this.opt.synonyms,w=this.opt.caseSensitive?"":"i",B=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var v in u){if(u.hasOwnProperty(v)){var x=u[v],A=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(v):this.escapeStr(v),y=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(x):this.escapeStr(x);if(A!==""&&y!==""){z=z.replace(new RegExp("("+this.escapeStr(A)+"|"+this.escapeStr(y)+")","gm"+w),B+("("+this.processSynonyms(A)+"|")+(this.processSynonyms(y)+")")+B)}}}return z}},{key:"processSynonyms",value:function i(u){if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length){u=this.setupIgnoreJoinersRegExp(u)}return u}},{key:"setupWildcardsRegExp",value:function t(u){u=u.replace(/(?:\\)*\?/g,function(v){return v.charAt(0)==="\\"?"?":"\x01"});return u.replace(/(?:\\)*\*/g,function(v){return v.charAt(0)==="\\"?"*":"\x02"})}},{key:"createWildcardsRegExp",value:function k(v){var u=this.opt.wildcards==="withSpaces";return v.replace(/\u0001/g,u?"[\\S\\s]?":"\\S?").replace(/\u0002/g,u?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function s(u){return u.replace(/[^(|)\\]/g,function(y,w,v){var x=v.charAt(w+1);if(/[(|)\\]/.test(x)||x===""){return y}else{return y+"\0"}})}},{key:"createJoinersRegExp",value:function o(w){var u=[];var v=this.opt.ignorePunctuation;if(Array.isArray(v)&&v.length){u.push(this.escapeStr(v.join("")))}if(this.opt.ignoreJoiners){u.push("\\u00ad\\u200b\\u200c\\u200d")}return u.length?w.split(/\u0000+/).join("["+u.join("")+"]*"):w}},{key:"createDiacriticsRegExp",value:function n(x){var v=this.opt.caseSensitive?"":"i",u=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"];var w=[];x.split("").forEach(function(y){u.every(function(z){if(z.indexOf(y)!==-1){if(w.indexOf(z)>-1){return false}x=x.replace(new RegExp("["+z+"]","gm"+v),"["+z+"]");w.push(z)}return true})});return x}},{key:"createMergedBlanksRegExp",value:function r(u){return u.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function p(z){var A=this;var w="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿";var x=this.opt.accuracy,y=typeof x==="string"?x:x.value,u=typeof x==="string"?[]:x.limiters,v="";u.forEach(function(B){v+="|"+A.escapeStr(B)});switch(y){case"partially":default:return"()("+z+")";case"complementary":v="\\s"+(v?v:this.escapeStr(w));return"()([^"+v+"]*"+z+"[^"+v+"]*)";case"exactly":return"(^|\\s"+v+")("+z+")(?=$|\\s"+v+")"}}}]);return q}();var e=function(){function x(G){h(this,x);this.ctx=G;this.ie=false;var H=window.navigator.userAgent;if(H.indexOf("MSIE")>-1||H.indexOf("Trident")>-1){this.ie=true}}g(x,[{key:"log",value:function s(H){var I=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"debug";var G=this.opt.log;if(!this.opt.debug){return}if((typeof G==="undefined"?"undefined":d(G))==="object"&&typeof G[I]==="function"){G[I]("mark.js: "+H)}}},{key:"getSeparatedKeywords",value:function z(H){var I=this;var G=[];H.forEach(function(J){if(!I.opt.separateWordSearch){if(J.trim()&&G.indexOf(J)===-1){G.push(J)}}else{J.split(" ").forEach(function(K){if(K.trim()&&G.indexOf(K)===-1){G.push(K)}})}});return{keywords:G.sort(function(K,J){return J.length-K.length}),length:G.length}}},{key:"isNumeric",value:function C(G){return Number(parseFloat(G))==G}},{key:"checkRanges",value:function D(J){var I=this;if(!Array.isArray(J)||Object.prototype.toString.call(J[0])!=="[object Object]"){this.log("markRanges() will only accept an array of objects");this.opt.noMatch(J);return[]}var G=[];var H=0;J.sort(function(L,K){return L.start-K.start}).forEach(function(N){var L=I.callNoMatchOnInvalidRanges(N,H),O=L.start,K=L.end,M=L.valid;if(M){N.start=O;N.length=K-O;G.push(N);H=K}});return G}},{key:"callNoMatchOnInvalidRanges",value:function l(H,J){var K=void 0,G=void 0,I=false;if(H&&typeof H.start!=="undefined"){K=parseInt(H.start,10);G=K+parseInt(H.length,10);if(this.isNumeric(H.start)&&this.isNumeric(H.length)&&G-J>0&&G-K>0){I=true}else{this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(H)));this.opt.noMatch(H)}}else{this.log("Ignoring invalid range: "+JSON.stringify(H));this.opt.noMatch(H)}return{start:K,end:G,valid:I}}},{key:"checkWhitespaceRanges",value:function k(J,I,K){var H=void 0,L=true,G=K.length,M=I-G,N=parseInt(J.start,10)-M;N=N>G?G:N;H=N+parseInt(J.length,10);if(H>G){H=G;this.log("End range automatically set to the max value of "+G)}if(N<0||H-N<0||N>G||H>G){L=false;this.log("Invalid range: "+JSON.stringify(J));this.opt.noMatch(J)}else{if(K.substring(N,H).replace(/\s+/g,"")===""){L=false;this.log("Skipping whitespace only range: "+JSON.stringify(J));this.opt.noMatch(J)}}return{start:N,end:H,valid:L}}},{key:"getTextNodes",value:function t(G){var I=this;var J="",H=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(K){H.push({start:J.length,end:(J+=K.textContent).length,node:K})},function(K){if(I.matchesExclude(K.parentNode)){return NodeFilter.FILTER_REJECT}else{return NodeFilter.FILTER_ACCEPT}},function(){G({value:J,nodes:H})})}},{key:"matchesExclude",value:function j(G){return b.matches(G,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function F(J,M,G){var L=!this.opt.element?"mark":this.opt.element,I=J.splitText(M),H=I.splitText(G-M);var K=document.createElement(L);K.setAttribute("data-markjs","true");if(this.opt.className){K.setAttribute("class",this.opt.className)}K.textContent=I.textContent;I.parentNode.replaceChild(K,I);return H}},{key:"wrapRangeInMappedTextNode",value:function m(L,K,G,I,H){var J=this;L.nodes.every(function(S,P){var O=L.nodes[P+1];if(typeof O==="undefined"||O.start>K){if(!I(S.node)){return false}var Q=K-S.start,R=(G>S.end?S.end:G)-S.start,N=L.value.substr(0,S.start),M=L.value.substr(R+S.start);S.node=J.wrapRangeInTextNode(S.node,Q,R);L.value=N+M;L.nodes.forEach(function(T,U){if(U>=P){if(L.nodes[U].start>0&&U!==P){L.nodes[U].start-=R}L.nodes[U].end-=R}});G-=R;H(S.node.previousSibling,S.start);if(G>S.end){K=S.end}else{return false}}return true})}},{key:"wrapGroups",value:function i(I,J,G,H){I=this.wrapRangeInTextNode(I,J,J+G);H(I.previousSibling);return I}},{key:"separateGroups",value:function w(M,K,H,J,I){var G=K.length;for(var L=1;L<G;L++){var N=M.textContent.indexOf(K[L]);if(K[L]&&N>-1&&J(K[L],M)){M=this.wrapGroups(M,N,K[L].length,I)}}return M}},{key:"wrapMatches",value:function n(L,K,J,I,M){var H=this;var G=K===0?0:K+1;this.getTextNodes(function(N){N.nodes.forEach(function(Q){Q=Q.node;var O=void 0;while((O=L.exec(Q.textContent))!==null&&O[G]!==""){if(H.opt.separateGroups){Q=H.separateGroups(Q,O,G,J,I)}else{if(!J(O[G],Q)){continue}var R=O.index;if(G!==0){for(var P=1;P<G;P++){R+=O[P].length}}Q=H.wrapGroups(Q,R,O[G].length,I)}L.lastIndex=0}});M()})}},{key:"wrapMatchesAcrossElements",value:function o(L,K,J,I,M){var H=this;var G=K===0?0:K+1;this.getTextNodes(function(R){var O=void 0;while((O=L.exec(R.value))!==null&&O[G]!==""){var Q=O.index;if(G!==0){for(var P=1;P<G;P++){Q+=O[P].length}}var N=Q+O[G].length;H.wrapRangeInMappedTextNode(R,Q,N,function(S){return J(O[G],S)},function(S,T){L.lastIndex=T;I(S)})}M()})}},{key:"wrapRangeFromIndex",value:function q(H,J,I,K){var G=this;this.getTextNodes(function(M){var L=M.value.length;H.forEach(function(P,O){var Q=G.checkWhitespaceRanges(P,L,M.value),S=Q.start,N=Q.end,R=Q.valid;if(R){G.wrapRangeInMappedTextNode(M,S,N,function(T){return J(T,P,M.value.substring(S,N),O)},function(T){I(T,P)})}});K()})}},{key:"unwrapMatches",value:function A(I){var H=I.parentNode;var G=document.createDocumentFragment();while(I.firstChild){G.appendChild(I.removeChild(I.firstChild))}H.replaceChild(G,I);if(!this.ie){H.normalize()}else{this.normalizeTextNode(H)}}},{key:"normalizeTextNode",value:function B(G){if(!G){return}if(G.nodeType===3){while(G.nextSibling&&G.nextSibling.nodeType===3){G.nodeValue+=G.nextSibling.nodeValue;G.parentNode.removeChild(G.nextSibling)}}else{this.normalizeTextNode(G.firstChild)}this.normalizeTextNode(G.nextSibling)}},{key:"markRegExp",value:function v(L,J){var G=this;this.opt=J;this.log('Searching with expression "'+L+'"');var I=0,K="wrapMatches";var H=function H(M){I++;G.opt.each(M)};if(this.opt.acrossElements){K="wrapMatchesAcrossElements"}this[K](L,this.opt.ignoreGroups,function(M,N){return G.opt.filter(N,M,I)},H,function(){if(I===0){G.opt.noMatch(L)}G.opt.done(I)})}},{key:"mark",value:function u(M,H){var J=this;this.opt=H;var N=0,L="wrapMatches";var K=this.getSeparatedKeywords(typeof M==="string"?[M]:M),I=K.keywords,G=K.length,O=function O(Q){var P=new a(J.opt).create(Q);var R=0;J.log('Searching with expression "'+P+'"');J[L](P,1,function(S,T){return J.opt.filter(T,Q,N,R)},function(S){R++;N++;J.opt.each(S)},function(){if(R===0){J.opt.noMatch(Q)}if(I[G-1]===Q){J.opt.done(N)}else{O(I[I.indexOf(Q)+1])}})};if(this.opt.acrossElements){L="wrapMatchesAcrossElements"}if(G===0){this.opt.done(N)}else{O(I[0])}}},{key:"markRanges",value:function r(H,J){var K=this;this.opt=J;var I=0,G=this.checkRanges(H);if(G&&G.length){this.log("Starting to mark with the following ranges: "+JSON.stringify(G));this.wrapRangeFromIndex(G,function(O,M,N,L){return K.opt.filter(O,M,N,L)},function(M,L){I++;K.opt.each(M,L)},function(){K.opt.done(I)})}else{this.opt.done(I)}}},{key:"unmark",value:function y(G){var I=this;this.opt=G;var H=this.opt.element?this.opt.element:"*";H+="[data-markjs]";if(this.opt.className){H+="."+this.opt.className}this.log('Removal selector "'+H+'"');this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(J){I.unwrapMatches(J)},function(L){var J=b.matches(L,H),K=I.matchesExclude(L);if(!J||K){return NodeFilter.FILTER_REJECT}else{return NodeFilter.FILTER_ACCEPT}},this.opt.done)}},{key:"opt",set:function E(K){this._opt=c({},{element:"",className:"",exclude:[],iframes:false,iframesTimeout:5000,separateWordSearch:true,acrossElements:false,ignoreGroups:0,each:function J(){},noMatch:function H(){},filter:function I(){return true},done:function G(){},debug:false,log:window.console},K)},get:function p(){return this._opt}},{key:"iterator",get:function p(){return new b(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]);return x}();f.fn.mark=function(i,j){new e(this.get()).mark(i,j);return this};f.fn.markRegExp=function(j,i){new e(this.get()).markRegExp(j,i);return this};f.fn.markRanges=function(i,j){new e(this.get()).markRanges(i,j);return this};f.fn.unmark=function(i){new e(this.get()).unmark(i);return this};return f})));